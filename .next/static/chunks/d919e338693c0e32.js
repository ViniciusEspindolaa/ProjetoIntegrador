(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62577,e=>{"use strict";var t=e.i(1972),l=e.i(75305),o=e.i(47222),a=e.i(17551),i=e.i(3617),s=e.i(57175),r=e.i(46322),n=e.i(17626);let d=(0,r.createOverlayComponent)(function(e,t){let l=new n.Popup(e,t.overlayContainer);return(0,s.createElementObject)(l,t)},function(e,t,{position:o},a){(0,l.useEffect)(function(){let{instance:l}=e;function i(e){e.popup===l&&(l.update(),a(!0))}function s(e){e.popup===l&&a(!1)}return t.map.on({popupopen:i,popupclose:s}),null==t.overlayContainer?(null!=o&&l.setLatLng(o),l.openOn(t.map)):t.overlayContainer.bindPopup(l),function(){t.map.off({popupopen:i,popupclose:s}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(l)}},[e,t,a,o])});var c=e.i(35354),f=e.i(30499),u=e.i(67881);function p({lat:e,lng:t}){let o=(0,c.useMap)();return l.default.useEffect(()=>{e&&t&&o.flyTo([e,t],14,{duration:.8})},[e,t,o]),null}function h({pets:e=[],selectedPetId:s,onPetSelect:r,statusFilter:c="all"}){l.default.useEffect(()=>{let e="leaflet-css";if(!document.getElementById(e)){let t=document.createElement("link");t.id=e,t.rel="stylesheet",t.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",t.crossOrigin="",document.head.appendChild(t);let l="leaflet-custom-css";if(!document.getElementById(l)){let e=document.createElement("style");e.id=l,e.innerHTML=`
          /* Ensure custom div icons are visible and not blocked by default marker styles */
          .custom-div-icon, .leaflet-marker-icon.custom-div-icon {
            background: transparent !important;
            border: 0 !important;
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
            width: 36px !important;
            height: 36px !important;
            padding: 0 !important;
          }
          .custom-div-icon svg { width: 36px; height: 36px; display: block; }
          /* remove default icon image fallback box-sizing that can hide svg */
          .leaflet-marker-icon { box-sizing: content-box; }
        `,document.head.appendChild(e)}}return()=>{}},[]);let h={lost:"#ef4444",found:"#3b82f6",adoption:"#10b981",default:"#6b7280"},[m,g]=(0,l.useState)(!1);l.default.useEffect(()=>{console.info("[leaflet-debug] cssIncluded=",!!document.getElementById("leaflet-css"),"window.L=",void 0!==window.L,"markersCount=",b.length)},[]);let x=(0,f.useRouter)(),b=(0,l.useMemo)(()=>(e||[]).map(e=>{let t=e?.localizacao?.latitude??e?.location?.lat??e?.localizacao?.lat,l=e?.localizacao?.longitude??e?.location?.lng??e?.localizacao?.lng,o=Array.isArray(e.fotos_urls)&&e.fotos_urls.length?e.fotos_urls[0]:e.photoUrl??(Array.isArray(e.fotos)&&e.fotos.length?e.fotos[0]:void 0);return{id:e.id,nome:e.nome??e.name??"Pet",lat:t,lng:l,photo:o,raw:e,status:e.status}}).filter(e=>!!e.lat&&!!e.lng).filter(e=>"all"===c||("lost"===c?"lost"===e.status:"found"===c?"found"===e.status:"adoption"!==c||"adoption"===e.status)),[e,c]),w=(0,l.useMemo)(()=>{if(s){let e=b.find(e=>e.id===s);if(e&&e.lat&&e.lng)return[e.lat,e.lng]}return b.length?[b[0].lat||-23.55,b[0].lng||-46.63]:[-23.55,-46.63]},[b,s]),v=b.find(e=>e.id===s);function y({label:e,color:l}){return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"inline-block",style:{width:18,height:18},children:(0,t.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M18 2 C12 2 8 6 8 12 C8 20 18 32 18 32 C18 32 28 20 28 12 C28 6 24 2 18 2 Z",fill:l,stroke:"#ffffff",strokeWidth:"1.2"}),(0,t.jsx)("circle",{cx:"18",cy:"12",r:"4",fill:"#ffffff"})]})}),(0,t.jsx)("span",{children:e})]})}return(0,t.jsxs)("div",{className:"w-full h-full relative",children:[(0,t.jsxs)(o.MapContainer,{center:w,zoom:13,style:{height:"100%",width:"100%",minHeight:"360px"},children:[(0,t.jsx)(a.TileLayer,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),b.map(e=>{let l=h[e.status||"default"]||h.default,o=`
            <svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="pin">
              <defs>
                <filter id="pinShadow" x="-50%" y="-50%" width="200%" height="200%">
                  <feDropShadow dx="0" dy="1" stdDeviation="1.2" flood-color="#000" flood-opacity="0.25" />
                </filter>
              </defs>
              <g filter="url(#pinShadow)">
                <path d="M18 2
                          C12 2 8 6 8 12
                          C8 20 18 32 18 32
                          C18 32 28 20 28 12
                          C28 6 24 2 18 2 Z"
                      fill="${l}" stroke="#ffffff" stroke-width="1.6"/>
                <circle cx="18" cy="12" r="5" fill="#ffffff" />
              </g>
            </svg>
          `,a=n.default.divIcon({html:o,className:"custom-div-icon",iconSize:[36,36],iconAnchor:[18,34],popupAnchor:[0,-36]});return(0,t.jsx)(i.Marker,{position:[e.lat||0,e.lng||0],icon:a,children:(0,t.jsx)(d,{children:(0,t.jsxs)("div",{style:{maxWidth:240},children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",style:{width:64},children:e.photo?(0,t.jsx)("img",{src:e.photo,alt:e.nome,className:"w-16 h-16 object-cover rounded"}):(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center text-sm text-gray-500",children:"Sem foto"})}),(0,t.jsxs)("div",{className:"flex-1 text-sm",children:[(0,t.jsx)("div",{className:"font-medium",children:e.nome}),e.raw?.breed&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.raw.breed}),e.raw?.location?.address&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.raw.location.address})]})]}),(0,t.jsx)("div",{className:"mt-2 text-right",children:(0,t.jsx)(u.Button,{size:"sm",onClick:()=>{try{x.push(`/pet/${e.id}`)}catch(t){window.location.href=`/pet/${e.id}`}},children:"Ver mais"})})]})})},e.id)}),(0,t.jsx)(p,{lat:v?.lat,lng:v?.lng})]}),(0,t.jsxs)("div",{className:"absolute top-3 right-3 z-[99999] text-sm",children:[(0,t.jsx)("div",{className:"hidden sm:block bg-white/95 dark:bg-slate-900/95 text-gray-900 dark:text-gray-100 rounded shadow-md p-2 pointer-events-auto border border-gray-200 dark:border-slate-700",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(y,{label:"Perdido",color:h.lost}),(0,t.jsx)(y,{label:"Encontrado",color:h.found}),(0,t.jsx)(y,{label:"Adoção",color:h.adoption})]})}),(0,t.jsx)("div",{className:"sm:hidden",children:(0,t.jsx)("button",{"aria-label":"Legenda",onClick:()=>g(e=>!e),className:"bg-white/95 dark:bg-slate-900/95 text-gray-900 dark:text-gray-100 p-2 rounded-full shadow-md border border-gray-200 dark:border-slate-700",children:(0,t.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"6",cy:"6",r:"3",fill:"#ef4444"}),(0,t.jsx)("circle",{cx:"12",cy:"6",r:"3",fill:"#3b82f6"}),(0,t.jsx)("circle",{cx:"18",cy:"6",r:"3",fill:"#10b981"})]})})})]}),m&&(0,t.jsx)("div",{className:"absolute bottom-4 right-4 z-[99999] bg-white/95 dark:bg-slate-900/95 text-gray-900 dark:text-gray-100 rounded shadow-md p-3 w-40 border border-gray-200 dark:border-slate-700",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{"aria-label":"Fechar legenda",onClick:()=>g(!1),className:"text-xs text-gray-600",children:"Fechar"})}),(0,t.jsx)(y,{label:"Perdido",color:h.lost}),(0,t.jsx)(y,{label:"Encontrado",color:h.found}),(0,t.jsx)(y,{label:"Adoção",color:h.adoption})]})})]})}n.default.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),e.s(["default",()=>h],62577)},93675,e=>{e.n(e.i(62577))}]);