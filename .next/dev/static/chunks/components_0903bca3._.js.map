{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vinic.VINICIUS/Desktop/PetFinder/Frontend/components/directions-dialog.tsx"],"sourcesContent":["'use client'\r\n\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogDescription,\r\n} from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport Image from 'next/image'\r\n\r\ninterface DirectionsDialogProps {\r\n  open: boolean\r\n  onClose: () => void\r\n  lat: number\r\n  lng: number\r\n  address?: string\r\n}\r\n\r\nexport function DirectionsDialog({ open, onClose, lat, lng, address }: DirectionsDialogProps) {\r\n  const handleGoogleMaps = () => {\r\n    window.open(`https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`, '_blank')\r\n    onClose()\r\n  }\r\n\r\n  const handleWaze = () => {\r\n    window.open(`https://waze.com/ul?ll=${lat},${lng}&navigate=yes`, '_blank')\r\n    onClose()\r\n  }\r\n\r\n  const handleUber = () => {\r\n    const url = `https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[latitude]=${lat}&dropoff[longitude]=${lng}&dropoff[nickname]=${encodeURIComponent(address || 'Destino')}`\r\n    window.open(url, '_blank')\r\n    onClose()\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={(val) => !val && onClose()}>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle>Como chegar</DialogTitle>\r\n          <DialogDescription>\r\n            Escolha o aplicativo para navegar até o local.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <div className=\"grid gap-3 py-2\">\r\n          <Button onClick={handleGoogleMaps} variant=\"outline\" className=\"flex items-center justify-start gap-3 h-16 px-4 hover:bg-slate-50\">\r\n            <div className=\"relative w-10 h-10 shrink-0\">\r\n              <Image src=\"/googlemapslogo.png\" alt=\"Google Maps\" fill className=\"object-contain\" />\r\n            </div>\r\n            <div className=\"text-left\">\r\n              <div className=\"font-semibold text-slate-900\">Google Maps</div>\r\n              <div className=\"text-xs text-slate-500\">Navegação padrão</div>\r\n            </div>\r\n          </Button>\r\n\r\n          <Button onClick={handleWaze} variant=\"outline\" className=\"flex items-center justify-start gap-3 h-16 px-4 hover:bg-slate-50\">\r\n            <div className=\"relative w-10 h-10 shrink-0\">\r\n              <Image src=\"/wazelogo.png\" alt=\"Waze\" fill className=\"object-contain\" />\r\n            </div>\r\n            <div className=\"text-left\">\r\n              <div className=\"font-semibold text-slate-900\">Waze</div>\r\n              <div className=\"text-xs text-slate-500\">Melhor para trânsito</div>\r\n            </div>\r\n          </Button>\r\n\r\n          <Button onClick={handleUber} variant=\"outline\" className=\"flex items-center justify-start gap-3 h-16 px-4 hover:bg-slate-50\">\r\n            <div className=\"relative w-10 h-10 shrink-0\">\r\n              <Image src=\"/uberlogo.svg\" alt=\"Uber\" fill className=\"object-contain\" />\r\n            </div>\r\n            <div className=\"text-left\">\r\n              <div className=\"font-semibold text-slate-900\">Uber</div>\r\n              <div className=\"text-xs text-slate-500\">Solicitar corrida</div>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAOA;AACA;AAVA;;;;;AAoBO,SAAS,iBAAiB,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAyB;IAC1F,MAAM,mBAAmB;QACvB,OAAO,IAAI,CAAC,CAAC,mDAAmD,EAAE,IAAI,CAAC,EAAE,KAAK,EAAE;QAChF;IACF;IAEA,MAAM,aAAa;QACjB,OAAO,IAAI,CAAC,CAAC,uBAAuB,EAAE,IAAI,CAAC,EAAE,IAAI,aAAa,CAAC,EAAE;QACjE;IACF;IAEA,MAAM,aAAa;QACjB,MAAM,MAAM,CAAC,6EAA6E,EAAE,IAAI,oBAAoB,EAAE,IAAI,mBAAmB,EAAE,mBAAmB,WAAW,YAAY;QACzL,OAAO,IAAI,CAAC,KAAK;QACjB;IACF;IAEA,qBACE,6LAAC,wIAAM;QAAC,MAAM;QAAM,cAAc,CAAC,MAAQ,CAAC,OAAO;kBACjD,cAAA,6LAAC,+IAAa;YAAC,WAAU;;8BACvB,6LAAC,8IAAY;;sCACX,6LAAC,6IAAW;sCAAC;;;;;;sCACb,6LAAC,mJAAiB;sCAAC;;;;;;;;;;;;8BAIrB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,wIAAM;4BAAC,SAAS;4BAAkB,SAAQ;4BAAU,WAAU;;8CAC7D,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,2IAAK;wCAAC,KAAI;wCAAsB,KAAI;wCAAc,IAAI;wCAAC,WAAU;;;;;;;;;;;8CAEpE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDAA+B;;;;;;sDAC9C,6LAAC;4CAAI,WAAU;sDAAyB;;;;;;;;;;;;;;;;;;sCAI5C,6LAAC,wIAAM;4BAAC,SAAS;4BAAY,SAAQ;4BAAU,WAAU;;8CACvD,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,2IAAK;wCAAC,KAAI;wCAAgB,KAAI;wCAAO,IAAI;wCAAC,WAAU;;;;;;;;;;;8CAEvD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDAA+B;;;;;;sDAC9C,6LAAC;4CAAI,WAAU;sDAAyB;;;;;;;;;;;;;;;;;;sCAI5C,6LAAC,wIAAM;4BAAC,SAAS;4BAAY,SAAQ;4BAAU,WAAU;;8CACvD,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,2IAAK;wCAAC,KAAI;wCAAgB,KAAI;wCAAO,IAAI;wCAAC,WAAU;;;;;;;;;;;8CAEvD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDAA+B;;;;;;sDAC9C,6LAAC;4CAAI,WAAU;sDAAyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOtD;KA5DgB"}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vinic.VINICIUS/Desktop/PetFinder/Frontend/components/leaflet-map.client.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useMemo, useState } from 'react'\r\nimport { MapContainer, TileLayer, Marker, Popup, useMap, useMapEvents } from 'react-leaflet'\r\nimport { useRouter } from 'next/navigation'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Locate } from 'lucide-react'\r\nimport L from 'leaflet'\r\nimport { DirectionsDialog } from '@/components/directions-dialog'\r\nimport { Eye } from 'lucide-react'\r\n\r\n// We dynamically inject Leaflet CSS at runtime to avoid Next.js global CSS restrictions\r\n// and to ensure the stylesheet is present only in the browser.\r\n\r\n// Ensure marker icons load correctly from CDN (avoids bundler image issues)\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\r\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\r\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\r\n})\r\n\r\ntype Pet = {\r\n  id: string\r\n  nome?: string\r\n  status?: string\r\n  fotos_urls?: string[]\r\n  localizacao?: {\r\n    latitude?: number\r\n    longitude?: number\r\n    lat?: number\r\n    lng?: number\r\n  }\r\n  location?: {\r\n    lat: number\r\n    lng: number\r\n    address?: string\r\n  }\r\n  photoUrl?: string\r\n  breed?: string\r\n  sightings?: any[]\r\n}\r\n\r\nfunction FlyToSelected({ lat, lng }: { lat?: number; lng?: number }) {\r\n  const map = useMap()\r\n  React.useEffect(() => {\r\n    if (lat && lng) {\r\n      map.flyTo([lat, lng], 14, { duration: 0.8 })\r\n    }\r\n  }, [lat, lng, map])\r\n  return null\r\n}\r\n\r\nexport default function LeafletMap({\r\n  pets = [],\r\n  selectedPetId,\r\n  onPetSelect,\r\n  onReportSighting,\r\n  onViewDetails,\r\n  onDeselect,\r\n  statusFilter = 'all',\r\n  userLocation,\r\n}: {\r\n  pets?: Pet[]\r\n  selectedPetId?: string | null\r\n  onPetSelect?: (p: Pet) => void\r\n  onReportSighting?: (p: Pet) => void\r\n  onViewDetails?: (p: Pet) => void\r\n  onDeselect?: () => void\r\n  statusFilter?: 'all' | 'lost' | 'found' | 'adoption'\r\n  userLocation?: { lat: number; lng: number }\r\n}) {\r\n  // Inject Leaflet CSS in the browser because importing 'leaflet/dist/leaflet.css'\r\n  // directly in a component can cause issues with Next.js app router / SSR.\r\n  React.useEffect(() => {\r\n    if (typeof window === 'undefined') return\r\n    const id = 'leaflet-css'\r\n    if (!document.getElementById(id)) {\r\n      const link = document.createElement('link')\r\n      link.id = id\r\n      link.rel = 'stylesheet'\r\n      link.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css'\r\n      link.crossOrigin = ''\r\n      document.head.appendChild(link)\r\n      // Inject small custom stylesheet to ensure our DivIcon SVGs are visible\r\n      const styleId = 'leaflet-custom-css'\r\n      if (!document.getElementById(styleId)) {\r\n        const style = document.createElement('style')\r\n        style.id = styleId\r\n        style.innerHTML = `\r\n          /* Ensure custom div icons are visible and not blocked by default marker styles */\r\n          .custom-div-icon, .leaflet-marker-icon.custom-div-icon {\r\n            background: transparent !important;\r\n            border: 0 !important;\r\n            display: inline-flex !important;\r\n            align-items: center !important;\r\n            justify-content: center !important;\r\n            width: 36px !important;\r\n            height: 36px !important;\r\n            padding: 0 !important;\r\n          }\r\n          .custom-div-icon svg { width: 36px; height: 36px; display: block; }\r\n          /* remove default icon image fallback box-sizing that can hide svg */\r\n          .leaflet-marker-icon { box-sizing: content-box; }\r\n        `\r\n        document.head.appendChild(style)\r\n      }\r\n    }\r\n    return () => {\r\n      // keep the CSS; optionally remove if needed\r\n      // const el = document.getElementById(id)\r\n      // if (el) el.remove()\r\n    }\r\n  }, [])\r\n\r\n  // Status colors (used both for icons and legend)\r\n  const STATUS_COLORS: Record<string, string> = {\r\n    lost: '#ef4444',\r\n    found: '#3b82f6',\r\n    adoption: '#10b981',\r\n    default: '#6b7280',\r\n  }\r\n\r\n  const [legendOpen, setLegendOpen] = useState(false)\r\n  const [liveLocation, setLiveLocation] = useState<{ lat: number; lng: number } | null>(null)\r\n  const [directionsData, setDirectionsData] = useState<{ lat: number; lng: number; address?: string } | null>(null)\r\n\r\n  const userIcon = L.divIcon({\r\n    html: `\r\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle cx=\"12\" cy=\"12\" r=\"8\" fill=\"#3b82f6\" stroke=\"#ffffff\" stroke-width=\"2\"/>\r\n        <circle cx=\"12\" cy=\"12\" r=\"12\" fill=\"#3b82f6\" fill-opacity=\"0.2\"/>\r\n      </svg>\r\n    `,\r\n    className: 'custom-div-icon user-location-icon',\r\n    iconSize: [24, 24],\r\n    iconAnchor: [12, 12],\r\n  })\r\n\r\n  const sightingIcon = L.divIcon({\r\n    html: `\r\n      <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"#f59e0b\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n        <filter id=\"eyeShadow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n          <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"1\" flood-color=\"#000\" flood-opacity=\"0.3\" />\r\n        </filter>\r\n        <g filter=\"url(#eyeShadow)\">\r\n          <path d=\"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z\" fill=\"#ffffff\" />\r\n          <circle cx=\"12\" cy=\"12\" r=\"3\" fill=\"#f59e0b\" />\r\n        </g>\r\n      </svg>\r\n    `,\r\n    className: 'custom-div-icon sighting-icon',\r\n    iconSize: [32, 32],\r\n    iconAnchor: [16, 16],\r\n  })\r\n\r\n  const router = useRouter()\r\n  const markers = useMemo(() => {\r\n    return (pets || [])\r\n      .map((p) => {\r\n        // Support different shapes: `localizacao: { latitude, longitude }` or `location: { lat, lng }`\r\n        const lat = p?.localizacao?.latitude ?? p?.location?.lat ?? p?.localizacao?.lat\r\n        const lng = p?.localizacao?.longitude ?? p?.location?.lng ?? p?.localizacao?.lng\r\n        const photo = Array.isArray(p.fotos_urls) && p.fotos_urls.length\r\n          ? p.fotos_urls[0]\r\n          : p.photoUrl ?? (Array.isArray((p as any).fotos) && (p as any).fotos.length ? (p as any).fotos[0] : undefined)\r\n\r\n        return {\r\n          id: p.id,\r\n          nome: (p as any).nome ?? (p as any).name ?? 'Pet',\r\n          lat,\r\n          lng,\r\n          photo,\r\n          raw: p,\r\n          status: p.status,\r\n          sightings: (p as any).sightings || []\r\n        }\r\n      })\r\n      .filter((m) => !!m.lat && !!m.lng)\r\n      .filter((m) => {\r\n        if (statusFilter === 'all') return true\r\n        if (statusFilter === 'lost') return m.status === 'lost'\r\n        if (statusFilter === 'found') return m.status === 'found'\r\n        if (statusFilter === 'adoption') return m.status === 'adoption'\r\n        return true\r\n      })\r\n  }, [pets, statusFilter])\r\n\r\n  // Debug: log presence of Leaflet resources and markers to help diagnose render issues\r\n  React.useEffect(() => {\r\n    if (typeof window === 'undefined') return\r\n    const hasCss = !!document.getElementById('leaflet-css')\r\n    const hasL = typeof (window as any).L !== 'undefined'\r\n    // eslint-disable-next-line no-console\r\n    console.info('[leaflet-debug] cssIncluded=', hasCss, 'window.L=', hasL, 'markersCount=', markers.length, 'userLocation=', userLocation)\r\n  }, [markers, userLocation])\r\n\r\n  // default center: User location or São Paulo\r\n  const center: [number, number] = useMemo(() => {\r\n    if (selectedPetId) {\r\n      const sp = markers.find((m) => m.id === selectedPetId)\r\n      if (sp && sp.lat && sp.lng) return [sp.lat, sp.lng]\r\n    }\r\n    if (userLocation) return [userLocation.lat, userLocation.lng]\r\n    if (markers.length) return [markers[0].lat || -23.55, markers[0].lng || -46.63]\r\n    return [-23.55, -46.63]\r\n  }, [markers, selectedPetId, userLocation])\r\n\r\n  const selected = markers.find((m) => m.id === selectedPetId)\r\n\r\n  return (\r\n    <div className=\"w-full h-full relative\">\r\n      <MapContainer center={center} zoom={13} style={{ height: '100%', width: '100%', minHeight: '360px' }}>\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n\r\n        {markers.map((m) => {\r\n          // create a colored DivIcon based on publication status (lost/found/adoption)\r\n          const color = STATUS_COLORS[m.status || 'default'] || STATUS_COLORS.default\r\n          const svg = `\r\n            <svg width=\"36\" height=\"36\" viewBox=\"0 0 36 36\" xmlns=\"http://www.w3.org/2000/svg\" role=\"img\" aria-label=\"pin\">\r\n              <defs>\r\n                <filter id=\"pinShadow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n                  <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"1.2\" flood-color=\"#000\" flood-opacity=\"0.25\" />\r\n                </filter>\r\n              </defs>\r\n              <g filter=\"url(#pinShadow)\">\r\n                <path d=\"M18 2\r\n                          C12 2 8 6 8 12\r\n                          C8 20 18 32 18 32\r\n                          C18 32 28 20 28 12\r\n                          C28 6 24 2 18 2 Z\"\r\n                      fill=\"${color}\" stroke=\"#ffffff\" stroke-width=\"1.6\"/>\r\n                <circle cx=\"18\" cy=\"12\" r=\"5\" fill=\"#ffffff\" />\r\n              </g>\r\n            </svg>\r\n          `\r\n          const icon = L.divIcon({\r\n            html: svg,\r\n            className: 'custom-div-icon',\r\n            iconSize: [36, 36],\r\n            iconAnchor: [18, 34],\r\n            popupAnchor: [0, -36]\r\n          })\r\n\r\n          const isSelected = selectedPetId === m.id\r\n\r\n          return (\r\n            <React.Fragment key={m.id}>\r\n              <Marker \r\n                position={[m.lat || 0, m.lng || 0]} \r\n                icon={icon}\r\n                eventHandlers={{\r\n                  click: () => {\r\n                    if (onPetSelect && m.raw) onPetSelect(m.raw)\r\n                  }\r\n                }}\r\n              >\r\n                <Popup>\r\n                  <div style={{ maxWidth: 240 }}>\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <div className=\"shrink-0\" style={{ width: 64 }}>\r\n                        {m.photo ? (\r\n                          <img src={m.photo} alt={m.nome} className=\"w-16 h-16 object-cover rounded\" />\r\n                        ) : (\r\n                          <div className=\"w-16 h-16 bg-gray-200 rounded flex items-center justify-center text-sm text-gray-500\">Sem foto</div>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"flex-1 text-sm\">\r\n                        <div className=\"font-medium\">{m.nome}</div>\r\n                        {m.raw?.breed && <div className=\"text-xs text-muted-foreground\">{m.raw.breed}</div>}\r\n                        {m.raw?.location?.address && <div className=\"text-xs text-muted-foreground\">{m.raw.location.address}</div>}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-2 flex justify-end gap-2\">\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"outline\"\r\n                        className=\"h-8 px-2 text-xs\"\r\n                        onClick={() => {\r\n                          setDirectionsData({ lat: m.lat || 0, lng: m.lng || 0, address: m.raw?.location?.address })\r\n                        }}\r\n                      >\r\n                        Como chegar\r\n                      </Button>\r\n                      {onReportSighting && m.status === 'lost' && (\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"secondary\"\r\n                          className=\"h-8 px-2 text-xs\"\r\n                          onClick={() => {\r\n                            if (m.raw) onReportSighting(m.raw)\r\n                          }}\r\n                        >\r\n                          Avistei!\r\n                        </Button>\r\n                      )}\r\n                      <Button\r\n                        size=\"sm\"\r\n                        className=\"h-8 px-2 text-xs\"\r\n                        onClick={() => {\r\n                          if (onViewDetails && m.raw) {\r\n                            onViewDetails(m.raw)\r\n                          } else {\r\n                            try {\r\n                              router.push(`/pet/${m.id}`)\r\n                            } catch (e) {\r\n                              // fallback to full navigation\r\n                              window.location.href = `/pet/${m.id}`\r\n                            }\r\n                          }\r\n                        }}\r\n                      >\r\n                        Ver mais\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </Popup>\r\n              </Marker>\r\n\r\n              {/* Render Sightings if this pet is selected */}\r\n              {isSelected && m.sightings && m.sightings.map((s: any) => (\r\n                <Marker\r\n                  key={`sighting-${s.id}`}\r\n                  position={[s.location.lat, s.location.lng]}\r\n                  icon={sightingIcon}\r\n                >\r\n                  <Popup>\r\n                    <div className=\"text-sm\">\r\n                      <div className=\"font-bold flex items-center gap-1 mb-1\">\r\n                        <Eye className=\"w-3 h-3\" />\r\n                        Avistamento\r\n                      </div>\r\n                      <div className=\"text-xs text-muted-foreground mb-1\">\r\n                        {new Date(s.date).toLocaleDateString()} às {s.time}\r\n                      </div>\r\n                      <div className=\"text-xs mb-2\">{s.location.address}</div>\r\n                      <div className=\"text-xs italic\">\"{s.description}\"</div>\r\n                    </div>\r\n                  </Popup>\r\n                </Marker>\r\n              ))}\r\n            </React.Fragment>\r\n          )\r\n        })}\r\n\r\n        <FlyToSelected lat={selected?.lat} lng={selected?.lng} />\r\n        <MapController userLocation={userLocation} />\r\n        <LocationHandler onLocationFound={setLiveLocation} />\r\n        <MapClickHandler onDeselect={onDeselect} />\r\n        <AutoCenter selectedPetId={selectedPetId} userLocation={userLocation} />\r\n        \r\n        {(userLocation || liveLocation) && (\r\n          <Marker \r\n            position={userLocation ? [userLocation.lat, userLocation.lng] : [liveLocation!.lat, liveLocation!.lng]} \r\n            icon={userIcon}\r\n          >\r\n            <Popup>\r\n              <div className=\"text-sm font-medium\">Sua localização atual</div>\r\n            </Popup>\r\n          </Marker>\r\n        )}\r\n      </MapContainer>\r\n\r\n      {/* Legend overlay (visible on sm+, toggle button on xs) */}\r\n      <div className=\"absolute bottom-24 right-3 text-sm\" style={{ zIndex: 99999 }}>\r\n        <div className=\"hidden sm:block bg-white/95 dark:bg-slate-900/95 text-gray-900 dark:text-gray-100 rounded shadow-md p-2 pointer-events-auto border border-gray-200 dark:border-slate-700\">\r\n          <div className=\"flex flex-col gap-1\">\r\n            <LegendRow label=\"Perdido\" color={STATUS_COLORS.lost} />\r\n            <LegendRow label=\"Encontrado\" color={STATUS_COLORS.found} />\r\n            <LegendRow label=\"Adoção\" color={STATUS_COLORS.adoption} />\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"inline-block\" style={{ width: 18, height: 18 }}>\r\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"#f59e0b\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                  <path d=\"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z\" fill=\"#ffffff\" />\r\n                  <circle cx=\"12\" cy=\"12\" r=\"3\" fill=\"#f59e0b\" />\r\n                </svg>\r\n              </span>\r\n              <span>Avistamento</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* Small screen toggle */}\r\n        <div className=\"sm:hidden\">\r\n          <button\r\n            aria-label=\"Legenda\"\r\n            onClick={() => setLegendOpen((v) => !v)}\r\n            className=\"bg-white/95 dark:bg-slate-900/95 text-gray-900 dark:text-gray-100 p-2 rounded-full shadow-md border border-gray-200 dark:border-slate-700\"\r\n          >\r\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n              <circle cx=\"6\" cy=\"6\" r=\"3\" fill=\"#ef4444\" />\r\n              <circle cx=\"12\" cy=\"6\" r=\"3\" fill=\"#3b82f6\" />\r\n              <circle cx=\"18\" cy=\"6\" r=\"3\" fill=\"#10b981\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Small screen legend panel */}\r\n      {legendOpen && (\r\n        <div className=\"absolute bottom-24 right-4 bg-white/95 dark:bg-slate-900/95 text-gray-900 dark:text-gray-100 rounded shadow-md p-3 w-40 border border-gray-200 dark:border-slate-700\" style={{ zIndex: 99999 }}>\r\n          <div className=\"flex flex-col gap-2\">\r\n            <div className=\"flex justify-end\">\r\n              <button aria-label=\"Fechar legenda\" onClick={() => setLegendOpen(false)} className=\"text-xs text-gray-600\">Fechar</button>\r\n            </div>\r\n            <LegendRow label=\"Perdido\" color={STATUS_COLORS.lost} />\r\n            <LegendRow label=\"Encontrado\" color={STATUS_COLORS.found} />\r\n            <LegendRow label=\"Adoção\" color={STATUS_COLORS.adoption} />\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"inline-block\" style={{ width: 18, height: 18 }}>\r\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"#f59e0b\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                  <path d=\"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z\" fill=\"#ffffff\" />\r\n                  <circle cx=\"12\" cy=\"12\" r=\"3\" fill=\"#f59e0b\" />\r\n                </svg>\r\n              </span>\r\n              <span>Avistamento</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <DirectionsDialog \r\n        open={!!directionsData} \r\n        onClose={() => setDirectionsData(null)} \r\n        lat={directionsData?.lat || 0} \r\n        lng={directionsData?.lng || 0} \r\n        address={directionsData?.address}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\n// Helper components defined outside to prevent re-mounting on every render\r\nfunction LocationHandler({ onLocationFound }: { onLocationFound: (latlng: { lat: number; lng: number }) => void }) {\r\n  useMapEvents({\r\n    locationfound(e) {\r\n      onLocationFound(e.latlng)\r\n    },\r\n  })\r\n  return null\r\n}\r\n\r\nfunction MapClickHandler({ onDeselect }: { onDeselect?: () => void }) {\r\n  useMapEvents({\r\n    click(e) {\r\n      if (onDeselect) {\r\n        onDeselect()\r\n      }\r\n    }\r\n  })\r\n  return null\r\n}\r\n\r\nfunction MapController({ userLocation }: { userLocation?: { lat: number; lng: number } }) {\r\n  const map = useMap()\r\n  \r\n  const handleCenterOnUser = () => {\r\n    if (userLocation) {\r\n      map.flyTo([userLocation.lat, userLocation.lng], 16, { duration: 0.8 })\r\n    } else {\r\n      map.locate({ setView: true, maxZoom: 16 })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"leaflet-top leaflet-right\" style={{ top: '20px', right: '10px' }}>\r\n      <div className=\"leaflet-control leaflet-bar\">\r\n        <button\r\n          className=\"bg-white hover:bg-gray-100 text-gray-800 font-semibold px-3 py-2 border border-gray-400 rounded shadow flex items-center gap-2 h-auto\"\r\n          onClick={handleCenterOnUser}\r\n          title=\"Centralizar na minha localização\"\r\n          aria-label=\"Centralizar na minha localização\"\r\n        >\r\n          <Locate className=\"w-4 h-4\" />\r\n          <span className=\"text-sm font-medium\">Minha localização</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction AutoCenter({ selectedPetId, userLocation }: { selectedPetId?: string | null, userLocation?: { lat: number; lng: number } }) {\r\n  const map = useMap()\r\n  const hasCentered = React.useRef(false)\r\n\r\n  React.useEffect(() => {\r\n    if (hasCentered.current) return\r\n\r\n    if (selectedPetId) {\r\n      hasCentered.current = true\r\n      return\r\n    }\r\n\r\n    if (userLocation) {\r\n      map.setView([userLocation.lat, userLocation.lng], 14)\r\n      hasCentered.current = true\r\n    } else {\r\n      map.locate({ setView: true, maxZoom: 14 })\r\n      hasCentered.current = true\r\n    }\r\n  }, [map, selectedPetId, userLocation])\r\n\r\n  return null\r\n}\r\n\r\n// small presentational helper: legend row with a mini-pin svg\r\nfunction LegendRow({ label, color }: { label: string; color: string }) {\r\n  return (\r\n    <div className=\"flex items-center gap-2\">\r\n      <span className=\"inline-block\" style={{ width: 18, height: 18 }}>\r\n        <svg width=\"18\" height=\"18\" viewBox=\"0 0 36 36\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path d=\"M18 2 C12 2 8 6 8 12 C8 20 18 32 18 32 C18 32 28 20 28 12 C28 6 24 2 18 2 Z\" fill={color} stroke=\"#ffffff\" strokeWidth=\"1.2\" />\r\n          <circle cx=\"18\" cy=\"12\" r=\"4\" fill=\"#ffffff\" />\r\n        </svg>\r\n      </span>\r\n      <span>{label}</span>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}