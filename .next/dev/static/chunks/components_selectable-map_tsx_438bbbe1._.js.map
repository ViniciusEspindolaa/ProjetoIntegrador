{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vinic.VINICIUS/Desktop/PetFinder/Frontend/components/selectable-map.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React from 'react'\r\nimport { MapContainer, TileLayer, Marker, useMapEvents, useMap } from 'react-leaflet'\r\nimport L from 'leaflet'\r\n\r\nexport default function SelectableMap({\r\n  latitude,\r\n  longitude,\r\n  onChange,\r\n  className,\r\n}: {\r\n  latitude?: number | null\r\n  longitude?: number | null\r\n  onChange: (lat: number, lng: number) => void\r\n  className?: string\r\n}) {\r\n  // Since we are using dynamic import with ssr: false, we are already on the client.\r\n  // However, we keep a ref to ensure we don't initialize things multiple times if not needed.\r\n  \r\n  React.useEffect(() => {\r\n    // Fix icons\r\n    // @ts-ignore\r\n    delete L.Icon.Default.prototype._getIconUrl\r\n    L.Icon.Default.mergeOptions({\r\n      iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\r\n      iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\r\n      shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\r\n    })\r\n\r\n    const id = 'leaflet-css'\r\n    if (!document.getElementById(id)) {\r\n      const link = document.createElement('link')\r\n      link.id = id\r\n      link.rel = 'stylesheet'\r\n      link.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css'\r\n      link.crossOrigin = ''\r\n      document.head.appendChild(link)\r\n      \r\n      const styleId = 'leaflet-selectable-custom'\r\n      if (!document.getElementById(styleId)) {\r\n        const style = document.createElement('style')\r\n        style.id = styleId\r\n        style.innerHTML = `\r\n          .custom-div-icon, .leaflet-marker-icon.custom-div-icon {\r\n            background: transparent !important;\r\n            border: 0 !important;\r\n            display: inline-flex !important;\r\n            align-items: center !important;\r\n            justify-content: center !important;\r\n            width: 36px !important;\r\n            height: 36px !important;\r\n            padding: 0 !important;\r\n          }\r\n          .custom-div-icon svg { width: 36px; height: 36px; display: block; }\r\n        `\r\n        document.head.appendChild(style)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  const center: [number, number] = React.useMemo(() => {\r\n    if (latitude && longitude) return [latitude, longitude]\r\n    return [-23.55, -46.63]\r\n  }, [latitude, longitude])\r\n\r\n  function ClickHandler() {\r\n    useMapEvents({\r\n      click(e) {\r\n        const { lat, lng } = e.latlng\r\n        onChange(lat, lng)\r\n      }\r\n    })\r\n    return null\r\n  }\r\n\r\n  function PanTo({ lat, lng }: { lat?: number | null; lng?: number | null }) {\r\n    const map = useMap()\r\n    React.useEffect(() => {\r\n      if (lat && lng) {\r\n        try {\r\n          map.flyTo([lat, lng], 14, { duration: 0.6 })\r\n        } catch (e) {\r\n          // ignore\r\n        }\r\n      }\r\n    }, [lat, lng, map])\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={className || 'w-full h-64'}>\r\n      <MapContainer \r\n        key=\"map-container\"\r\n        center={center} \r\n        zoom={13} \r\n        style={{ height: '100%', width: '100%' }}\r\n      >\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        <ClickHandler />\r\n        {latitude && longitude && (() => {\r\n          const color = '#2563eb'\r\n          const svg = `\r\n            <svg width=\"36\" height=\"36\" viewBox=\"0 0 36 36\" xmlns=\"http://www.w3.org/2000/svg\" role=\"img\" aria-label=\"pin\">\r\n              <path d=\"M18 2 C12 2 8 6 8 12 C8 20 18 32 18 32 C18 32 28 20 28 12 C28 6 24 2 18 2 Z\" fill=\"${color}\" stroke=\"#ffffff\" stroke-width=\"1.2\" />\r\n              <circle cx=\"18\" cy=\"12\" r=\"4\" fill=\"#ffffff\" />\r\n            </svg>\r\n          `\r\n          const icon = L.divIcon({ html: svg, className: 'custom-div-icon', iconSize: [36, 36], iconAnchor: [18, 34] })\r\n          return (\r\n            <>\r\n              <PanTo lat={latitude} lng={longitude} />\r\n              <Marker\r\n                position={[latitude, longitude]}\r\n                icon={icon}\r\n                draggable={true}\r\n                eventHandlers={{\r\n                  dragend(e: any) {\r\n                    const { lat, lng } = e.target.getLatLng()\r\n                    onChange(lat, lng)\r\n                  }\r\n                }}\r\n              />\r\n            </>\r\n          )\r\n        })()}\r\n      </MapContainer>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}