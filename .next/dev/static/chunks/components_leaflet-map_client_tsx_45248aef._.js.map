{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vinic.VINICIUS/Desktop/PetFinder/Frontend/components/leaflet-map.client.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useMemo, useState } from 'react'\r\nimport { MapContainer, TileLayer, Marker, Popup, useMap, useMapEvents } from 'react-leaflet'\r\nimport { useRouter } from 'next/navigation'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Locate } from 'lucide-react'\r\nimport L from 'leaflet'\r\nimport { DirectionsDialog } from '@/components/directions-dialog'\r\n\r\n// We dynamically inject Leaflet CSS at runtime to avoid Next.js global CSS restrictions\r\n// and to ensure the stylesheet is present only in the browser.\r\n\r\n// Ensure marker icons load correctly from CDN (avoids bundler image issues)\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\r\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\r\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\r\n})\r\n\r\ntype Pet = {\r\n  id: string\r\n  nome?: string\r\n  status?: string\r\n  fotos_urls?: string[]\r\n  localizacao?: {\r\n    latitude?: number\r\n    longitude?: number\r\n  }\r\n}\r\n\r\nfunction FlyToSelected({ lat, lng }: { lat?: number; lng?: number }) {\r\n  const map = useMap()\r\n  React.useEffect(() => {\r\n    if (lat && lng) {\r\n      map.flyTo([lat, lng], 14, { duration: 0.8 })\r\n    }\r\n  }, [lat, lng, map])\r\n  return null\r\n}\r\n\r\nexport default function LeafletMap({\r\n  pets = [],\r\n  selectedPetId,\r\n  onPetSelect,\r\n  statusFilter = 'all',\r\n  userLocation,\r\n}: {\r\n  pets?: Pet[]\r\n  selectedPetId?: string | null\r\n  onPetSelect?: (p: Pet) => void\r\n  statusFilter?: 'all' | 'lost' | 'found' | 'adoption'\r\n  userLocation?: { lat: number; lng: number }\r\n}) {\r\n  // Inject Leaflet CSS in the browser because importing 'leaflet/dist/leaflet.css'\r\n  // directly in a component can cause issues with Next.js app router / SSR.\r\n  React.useEffect(() => {\r\n    if (typeof window === 'undefined') return\r\n    const id = 'leaflet-css'\r\n    if (!document.getElementById(id)) {\r\n      const link = document.createElement('link')\r\n      link.id = id\r\n      link.rel = 'stylesheet'\r\n      link.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css'\r\n      link.crossOrigin = ''\r\n      document.head.appendChild(link)\r\n      // Inject small custom stylesheet to ensure our DivIcon SVGs are visible\r\n      const styleId = 'leaflet-custom-css'\r\n      if (!document.getElementById(styleId)) {\r\n        const style = document.createElement('style')\r\n        style.id = styleId\r\n        style.innerHTML = `\r\n          /* Ensure custom div icons are visible and not blocked by default marker styles */\r\n          .custom-div-icon, .leaflet-marker-icon.custom-div-icon {\r\n            background: transparent !important;\r\n            border: 0 !important;\r\n            display: inline-flex !important;\r\n            align-items: center !important;\r\n            justify-content: center !important;\r\n            width: 36px !important;\r\n            height: 36px !important;\r\n            padding: 0 !important;\r\n          }\r\n          .custom-div-icon svg { width: 36px; height: 36px; display: block; }\r\n          /* remove default icon image fallback box-sizing that can hide svg */\r\n          .leaflet-marker-icon { box-sizing: content-box; }\r\n        `\r\n        document.head.appendChild(style)\r\n      }\r\n    }\r\n    return () => {\r\n      // keep the CSS; optionally remove if needed\r\n      // const el = document.getElementById(id)\r\n      // if (el) el.remove()\r\n    }\r\n  }, [])\r\n\r\n  // Status colors (used both for icons and legend)\r\n  const STATUS_COLORS: Record<string, string> = {\r\n    lost: '#ef4444',\r\n    found: '#3b82f6',\r\n    adoption: '#10b981',\r\n    default: '#6b7280',\r\n  }\r\n\r\n  const [legendOpen, setLegendOpen] = useState(false)\r\n  const [liveLocation, setLiveLocation] = useState<{ lat: number; lng: number } | null>(null)\r\n  const [directionsData, setDirectionsData] = useState<{ lat: number; lng: number; address?: string } | null>(null)\r\n\r\n  const userIcon = L.divIcon({\r\n    html: `\r\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle cx=\"12\" cy=\"12\" r=\"8\" fill=\"#3b82f6\" stroke=\"#ffffff\" stroke-width=\"2\"/>\r\n        <circle cx=\"12\" cy=\"12\" r=\"12\" fill=\"#3b82f6\" fill-opacity=\"0.2\"/>\r\n      </svg>\r\n    `,\r\n    className: 'custom-div-icon user-location-icon',\r\n    iconSize: [24, 24],\r\n    iconAnchor: [12, 12],\r\n  })\r\n\r\n  const router = useRouter()\r\n  const markers = useMemo(() => {\r\n    return (pets || [])\r\n      .map((p) => {\r\n        // Support different shapes: `localizacao: { latitude, longitude }` or `location: { lat, lng }`\r\n        const lat = p?.localizacao?.latitude ?? p?.location?.lat ?? p?.localizacao?.lat\r\n        const lng = p?.localizacao?.longitude ?? p?.location?.lng ?? p?.localizacao?.lng\r\n        const photo = Array.isArray(p.fotos_urls) && p.fotos_urls.length\r\n          ? p.fotos_urls[0]\r\n          : p.photoUrl ?? (Array.isArray((p as any).fotos) && (p as any).fotos.length ? (p as any).fotos[0] : undefined)\r\n\r\n        return {\r\n          id: p.id,\r\n          nome: (p as any).nome ?? (p as any).name ?? 'Pet',\r\n          lat,\r\n          lng,\r\n          photo,\r\n          raw: p,\r\n          status: p.status,\r\n        }\r\n      })\r\n      .filter((m) => !!m.lat && !!m.lng)\r\n      .filter((m) => {\r\n        if (statusFilter === 'all') return true\r\n        if (statusFilter === 'lost') return m.status === 'lost'\r\n        if (statusFilter === 'found') return m.status === 'found'\r\n        if (statusFilter === 'adoption') return m.status === 'adoption'\r\n        return true\r\n      })\r\n  }, [pets, statusFilter])\r\n\r\n  // Debug: log presence of Leaflet resources and markers to help diagnose render issues\r\n  React.useEffect(() => {\r\n    if (typeof window === 'undefined') return\r\n    const hasCss = !!document.getElementById('leaflet-css')\r\n    const hasL = typeof (window as any).L !== 'undefined'\r\n    // eslint-disable-next-line no-console\r\n    console.info('[leaflet-debug] cssIncluded=', hasCss, 'window.L=', hasL, 'markersCount=', markers.length, 'userLocation=', userLocation)\r\n  }, [markers, userLocation])\r\n\r\n  // default center: User location or São Paulo\r\n  const center: [number, number] = useMemo(() => {\r\n    if (selectedPetId) {\r\n      const sp = markers.find((m) => m.id === selectedPetId)\r\n      if (sp && sp.lat && sp.lng) return [sp.lat, sp.lng]\r\n    }\r\n    if (userLocation) return [userLocation.lat, userLocation.lng]\r\n    if (markers.length) return [markers[0].lat || -23.55, markers[0].lng || -46.63]\r\n    return [-23.55, -46.63]\r\n  }, [markers, selectedPetId, userLocation])\r\n\r\n  const selected = markers.find((m) => m.id === selectedPetId)\r\n\r\n  function LocationHandler() {\r\n    useMapEvents({\r\n      locationfound(e) {\r\n        setLiveLocation(e.latlng)\r\n        // map.flyTo(e.latlng, 16) is handled by locate({ setView: true }) or we can do it here\r\n      },\r\n    })\r\n    return null\r\n  }\r\n\r\n  function MapController() {\r\n    const map = useMap()\r\n    \r\n    // Center on user location button handler\r\n    const handleCenterOnUser = () => {\r\n      if (userLocation) {\r\n        map.flyTo([userLocation.lat, userLocation.lng], 16, { duration: 0.8 })\r\n      } else {\r\n        // Fallback to browser geolocation if no saved location\r\n        map.locate({ setView: true, maxZoom: 16, duration: 0.8 })\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"leaflet-top leaflet-right\" style={{ top: '20px', right: '10px' }}>\r\n        <div className=\"leaflet-control leaflet-bar\">\r\n          <button\r\n            className=\"bg-white hover:bg-gray-100 text-gray-800 font-semibold px-3 py-2 border border-gray-400 rounded shadow flex items-center gap-2 h-auto\"\r\n            onClick={handleCenterOnUser}\r\n            title=\"Centralizar na minha localização\"\r\n            aria-label=\"Centralizar na minha localização\"\r\n          >\r\n            <Locate className=\"w-4 h-4\" />\r\n            <span className=\"text-sm font-medium\">Minha localização</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // small presentational helper: legend row with a mini-pin svg\r\n  function LegendRow({ label, color }: { label: string; color: string }) {\r\n    return (\r\n      <div className=\"flex items-center gap-2\">\r\n        <span className=\"inline-block\" style={{ width: 18, height: 18 }}>\r\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 36 36\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path d=\"M18 2 C12 2 8 6 8 12 C8 20 18 32 18 32 C18 32 28 20 28 12 C28 6 24 2 18 2 Z\" fill={color} stroke=\"#ffffff\" strokeWidth=\"1.2\" />\r\n            <circle cx=\"18\" cy=\"12\" r=\"4\" fill=\"#ffffff\" />\r\n          </svg>\r\n        </span>\r\n        <span>{label}</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full h-full relative\">\r\n      <MapContainer center={center} zoom={13} style={{ height: '100%', width: '100%', minHeight: '360px' }}>\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n\r\n        {markers.map((m) => {\r\n          // create a colored DivIcon based on publication status (lost/found/adoption)\r\n          const color = STATUS_COLORS[m.status || 'default'] || STATUS_COLORS.default\r\n          const svg = `\r\n            <svg width=\"36\" height=\"36\" viewBox=\"0 0 36 36\" xmlns=\"http://www.w3.org/2000/svg\" role=\"img\" aria-label=\"pin\">\r\n              <defs>\r\n                <filter id=\"pinShadow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n                  <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"1.2\" flood-color=\"#000\" flood-opacity=\"0.25\" />\r\n                </filter>\r\n              </defs>\r\n              <g filter=\"url(#pinShadow)\">\r\n                <path d=\"M18 2\r\n                          C12 2 8 6 8 12\r\n                          C8 20 18 32 18 32\r\n                          C18 32 28 20 28 12\r\n                          C28 6 24 2 18 2 Z\"\r\n                      fill=\"${color}\" stroke=\"#ffffff\" stroke-width=\"1.6\"/>\r\n                <circle cx=\"18\" cy=\"12\" r=\"5\" fill=\"#ffffff\" />\r\n              </g>\r\n            </svg>\r\n          `\r\n          const icon = L.divIcon({\r\n            html: svg,\r\n            className: 'custom-div-icon',\r\n            iconSize: [36, 36],\r\n            iconAnchor: [18, 34],\r\n            popupAnchor: [0, -36]\r\n          })\r\n\r\n          return (\r\n            <Marker key={m.id} position={[m.lat || 0, m.lng || 0]} icon={icon}>\r\n              <Popup>\r\n                <div style={{ maxWidth: 240 }}>\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <div className=\"shrink-0\" style={{ width: 64 }}>\r\n                      {m.photo ? (\r\n                        <img src={m.photo} alt={m.nome} className=\"w-16 h-16 object-cover rounded\" />\r\n                      ) : (\r\n                        <div className=\"w-16 h-16 bg-gray-200 rounded flex items-center justify-center text-sm text-gray-500\">Sem foto</div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex-1 text-sm\">\r\n                      <div className=\"font-medium\">{m.nome}</div>\r\n                      {m.raw?.breed && <div className=\"text-xs text-muted-foreground\">{m.raw.breed}</div>}\r\n                      {m.raw?.location?.address && <div className=\"text-xs text-muted-foreground\">{m.raw.location.address}</div>}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"mt-2 flex justify-end gap-2\">\r\n                    <Button\r\n                      size=\"sm\"\r\n                      variant=\"outline\"\r\n                      className=\"h-8 px-2 text-xs\"\r\n                      onClick={() => {\r\n                        setDirectionsData({ lat: m.lat, lng: m.lng, address: m.raw?.location?.address })\r\n                      }}\r\n                    >\r\n                      Como chegar\r\n                    </Button>\r\n                    <Button\r\n                      size=\"sm\"\r\n                      className=\"h-8 px-2 text-xs\"\r\n                      onClick={() => {\r\n                        try {\r\n                          router.push(`/pet/${m.id}`)\r\n                        } catch (e) {\r\n                          // fallback to full navigation\r\n                          window.location.href = `/pet/${m.id}`\r\n                        }\r\n                      }}\r\n                    >\r\n                      Ver mais\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </Popup>\r\n            </Marker>\r\n          )\r\n        })}\r\n\r\n        <FlyToSelected lat={selected?.lat} lng={selected?.lng} />\r\n        <MapController />\r\n        <LocationHandler />\r\n        \r\n        {(userLocation || liveLocation) && (\r\n          <Marker \r\n            position={userLocation ? [userLocation.lat, userLocation.lng] : [liveLocation!.lat, liveLocation!.lng]} \r\n            icon={userIcon}\r\n          >\r\n            <Popup>\r\n              <div className=\"text-sm font-medium\">Sua localização atual</div>\r\n            </Popup>\r\n          </Marker>\r\n        )}\r\n      </MapContainer>\r\n\r\n      {/* Legend overlay (visible on sm+, toggle button on xs) */}\r\n      <div className=\"absolute bottom-8 right-3 text-sm\" style={{ zIndex: 99999 }}>\r\n        <div className=\"hidden sm:block bg-white/95 dark:bg-slate-900/95 text-gray-900 dark:text-gray-100 rounded shadow-md p-2 pointer-events-auto border border-gray-200 dark:border-slate-700\">\r\n          <div className=\"flex flex-col gap-1\">\r\n            <LegendRow label=\"Perdido\" color={STATUS_COLORS.lost} />\r\n            <LegendRow label=\"Encontrado\" color={STATUS_COLORS.found} />\r\n            <LegendRow label=\"Adoção\" color={STATUS_COLORS.adoption} />\r\n          </div>\r\n        </div>\r\n        {/* Small screen toggle */}\r\n        <div className=\"sm:hidden\">\r\n          <button\r\n            aria-label=\"Legenda\"\r\n            onClick={() => setLegendOpen((v) => !v)}\r\n            className=\"bg-white/95 dark:bg-slate-900/95 text-gray-900 dark:text-gray-100 p-2 rounded-full shadow-md border border-gray-200 dark:border-slate-700\"\r\n          >\r\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n              <circle cx=\"6\" cy=\"6\" r=\"3\" fill=\"#ef4444\" />\r\n              <circle cx=\"12\" cy=\"6\" r=\"3\" fill=\"#3b82f6\" />\r\n              <circle cx=\"18\" cy=\"6\" r=\"3\" fill=\"#10b981\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Small screen legend panel */}\r\n      {legendOpen && (\r\n        <div className=\"absolute bottom-4 right-4 bg-white/95 dark:bg-slate-900/95 text-gray-900 dark:text-gray-100 rounded shadow-md p-3 w-40 border border-gray-200 dark:border-slate-700\" style={{ zIndex: 99999 }}>\r\n          <div className=\"flex flex-col gap-2\">\r\n            <div className=\"flex justify-end\">\r\n              <button aria-label=\"Fechar legenda\" onClick={() => setLegendOpen(false)} className=\"text-xs text-gray-600\">Fechar</button>\r\n            </div>\r\n            <LegendRow label=\"Perdido\" color={STATUS_COLORS.lost} />\r\n            <LegendRow label=\"Encontrado\" color={STATUS_COLORS.found} />\r\n            <LegendRow label=\"Adoção\" color={STATUS_COLORS.adoption} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <DirectionsDialog \r\n        open={!!directionsData} \r\n        onClose={() => setDirectionsData(null)} \r\n        lat={directionsData?.lat || 0} \r\n        lng={directionsData?.lng || 0} \r\n        address={directionsData?.address}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;;AAUA,wFAAwF;AACxF,+DAA+D;AAE/D,4EAA4E;AAC5E,+JAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;IAC1B,eAAe;IACf,SAAS;IACT,WAAW;AACb;AAaA,SAAS,cAAc,EAAE,GAAG,EAAE,GAAG,EAAkC;;IACjE,MAAM,MAAM,IAAA,6JAAM;IAClB,wKAAK,CAAC,SAAS;mCAAC;YACd,IAAI,OAAO,KAAK;gBACd,IAAI,KAAK,CAAC;oBAAC;oBAAK;iBAAI,EAAE,IAAI;oBAAE,UAAU;gBAAI;YAC5C;QACF;kCAAG;QAAC;QAAK;QAAK;KAAI;IAClB,OAAO;AACT;GARS;;QACK,6JAAM;;;KADX;AAUM,SAAS,WAAW,EACjC,OAAO,EAAE,EACT,aAAa,EACb,WAAW,EACX,eAAe,KAAK,EACpB,YAAY,EAOb;;;IACC,iFAAiF;IACjF,0EAA0E;IAC1E,wKAAK,CAAC,SAAS;gCAAC;YACd;;YACA,MAAM,KAAK;YACX,IAAI,CAAC,SAAS,cAAc,CAAC,KAAK;gBAChC,MAAM,OAAO,SAAS,aAAa,CAAC;gBACpC,KAAK,EAAE,GAAG;gBACV,KAAK,GAAG,GAAG;gBACX,KAAK,IAAI,GAAG;gBACZ,KAAK,WAAW,GAAG;gBACnB,SAAS,IAAI,CAAC,WAAW,CAAC;gBAC1B,wEAAwE;gBACxE,MAAM,UAAU;gBAChB,IAAI,CAAC,SAAS,cAAc,CAAC,UAAU;oBACrC,MAAM,QAAQ,SAAS,aAAa,CAAC;oBACrC,MAAM,EAAE,GAAG;oBACX,MAAM,SAAS,GAAG,CAAC;;;;;;;;;;;;;;;QAenB,CAAC;oBACD,SAAS,IAAI,CAAC,WAAW,CAAC;gBAC5B;YACF;YACA;wCAAO;gBACL,4CAA4C;gBAC5C,yCAAyC;gBACzC,sBAAsB;gBACxB;;QACF;+BAAG,EAAE;IAEL,iDAAiD;IACjD,MAAM,gBAAwC;QAC5C,MAAM;QACN,OAAO;QACP,UAAU;QACV,SAAS;IACX;IAEA,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAsC;IACtF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAwD;IAE5G,MAAM,WAAW,+JAAC,CAAC,OAAO,CAAC;QACzB,MAAM,CAAC;;;;;IAKP,CAAC;QACD,WAAW;QACX,UAAU;YAAC;YAAI;SAAG;QAClB,YAAY;YAAC;YAAI;SAAG;IACtB;IAEA,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,UAAU,IAAA,wKAAO;uCAAC;YACtB,OAAO,CAAC,QAAQ,EAAE,EACf,GAAG;+CAAC,CAAC;oBACJ,+FAA+F;oBAC/F,MAAM,MAAM,GAAG,aAAa,YAAY,GAAG,UAAU,OAAO,GAAG,aAAa;oBAC5E,MAAM,MAAM,GAAG,aAAa,aAAa,GAAG,UAAU,OAAO,GAAG,aAAa;oBAC7E,MAAM,QAAQ,MAAM,OAAO,CAAC,EAAE,UAAU,KAAK,EAAE,UAAU,CAAC,MAAM,GAC5D,EAAE,UAAU,CAAC,EAAE,GACf,EAAE,QAAQ,IAAI,CAAC,MAAM,OAAO,CAAC,AAAC,EAAU,KAAK,KAAK,AAAC,EAAU,KAAK,CAAC,MAAM,GAAG,AAAC,EAAU,KAAK,CAAC,EAAE,GAAG,SAAS;oBAE/G,OAAO;wBACL,IAAI,EAAE,EAAE;wBACR,MAAM,AAAC,EAAU,IAAI,IAAI,AAAC,EAAU,IAAI,IAAI;wBAC5C;wBACA;wBACA;wBACA,KAAK;wBACL,QAAQ,EAAE,MAAM;oBAClB;gBACF;8CACC,MAAM;+CAAC,CAAC,IAAM,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,CAAC,EAAE,GAAG;8CAChC,MAAM;+CAAC,CAAC;oBACP,IAAI,iBAAiB,OAAO,OAAO;oBACnC,IAAI,iBAAiB,QAAQ,OAAO,EAAE,MAAM,KAAK;oBACjD,IAAI,iBAAiB,SAAS,OAAO,EAAE,MAAM,KAAK;oBAClD,IAAI,iBAAiB,YAAY,OAAO,EAAE,MAAM,KAAK;oBACrD,OAAO;gBACT;;QACJ;sCAAG;QAAC;QAAM;KAAa;IAEvB,sFAAsF;IACtF,wKAAK,CAAC,SAAS;gCAAC;YACd;;YACA,MAAM,SAAS,CAAC,CAAC,SAAS,cAAc,CAAC;YACzC,MAAM,OAAO,OAAO,AAAC,OAAe,CAAC,KAAK;YAC1C,sCAAsC;YACtC,QAAQ,IAAI,CAAC,gCAAgC,QAAQ,aAAa,MAAM,iBAAiB,QAAQ,MAAM,EAAE,iBAAiB;QAC5H;+BAAG;QAAC;QAAS;KAAa;IAE1B,6CAA6C;IAC7C,MAAM,SAA2B,IAAA,wKAAO;sCAAC;YACvC,IAAI,eAAe;gBACjB,MAAM,KAAK,QAAQ,IAAI;qDAAC,CAAC,IAAM,EAAE,EAAE,KAAK;;gBACxC,IAAI,MAAM,GAAG,GAAG,IAAI,GAAG,GAAG,EAAE,OAAO;oBAAC,GAAG,GAAG;oBAAE,GAAG,GAAG;iBAAC;YACrD;YACA,IAAI,cAAc,OAAO;gBAAC,aAAa,GAAG;gBAAE,aAAa,GAAG;aAAC;YAC7D,IAAI,QAAQ,MAAM,EAAE,OAAO;gBAAC,OAAO,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;gBAAO,OAAO,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;aAAM;YAC/E,OAAO;gBAAC,CAAC;gBAAO,CAAC;aAAM;QACzB;qCAAG;QAAC;QAAS;QAAe;KAAa;IAEzC,MAAM,WAAW,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAE9C,SAAS;;QACP,IAAA,mKAAY,EAAC;YACX,eAAc,CAAC;gBACb,gBAAgB,EAAE,MAAM;YACxB,uFAAuF;YACzF;QACF;QACA,OAAO;IACT;OARS;;YACP,mKAAY;;;IASd,SAAS;;QACP,MAAM,MAAM,IAAA,6JAAM;QAElB,yCAAyC;QACzC,MAAM,qBAAqB;YACzB,IAAI,cAAc;gBAChB,IAAI,KAAK,CAAC;oBAAC,aAAa,GAAG;oBAAE,aAAa,GAAG;iBAAC,EAAE,IAAI;oBAAE,UAAU;gBAAI;YACtE,OAAO;gBACL,uDAAuD;gBACvD,IAAI,MAAM,CAAC;oBAAE,SAAS;oBAAM,SAAS;oBAAI,UAAU;gBAAI;YACzD;QACF;QAEA,qBACE,6LAAC;YAAI,WAAU;YAA4B,OAAO;gBAAE,KAAK;gBAAQ,OAAO;YAAO;sBAC7E,cAAA,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,WAAU;oBACV,SAAS;oBACT,OAAM;oBACN,cAAW;;sCAEX,6LAAC,mNAAM;4BAAC,WAAU;;;;;;sCAClB,6LAAC;4BAAK,WAAU;sCAAsB;;;;;;;;;;;;;;;;;;;;;;IAKhD;QA5BS;;YACK,6JAAM;;;IA6BpB,8DAA8D;IAC9D,SAAS,UAAU,EAAE,KAAK,EAAE,KAAK,EAAoC;QACnE,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAK,WAAU;oBAAe,OAAO;wBAAE,OAAO;wBAAI,QAAQ;oBAAG;8BAC5D,cAAA,6LAAC;wBAAI,OAAM;wBAAK,QAAO;wBAAK,SAAQ;wBAAY,OAAM;;0CACpD,6LAAC;gCAAK,GAAE;gCAA8E,MAAM;gCAAO,QAAO;gCAAU,aAAY;;;;;;0CAChI,6LAAC;gCAAO,IAAG;gCAAK,IAAG;gCAAK,GAAE;gCAAI,MAAK;;;;;;;;;;;;;;;;;8BAGvC,6LAAC;8BAAM;;;;;;;;;;;;IAGb;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,0KAAY;gBAAC,QAAQ;gBAAQ,MAAM;gBAAI,OAAO;oBAAE,QAAQ;oBAAQ,OAAO;oBAAQ,WAAW;gBAAQ;;kCACjG,6LAAC,oKAAS;wBACR,aAAY;wBACZ,KAAI;;;;;;oBAGL,QAAQ,GAAG,CAAC,CAAC;wBACZ,6EAA6E;wBAC7E,MAAM,QAAQ,aAAa,CAAC,EAAE,MAAM,IAAI,UAAU,IAAI,cAAc,OAAO;wBAC3E,MAAM,MAAM,CAAC;;;;;;;;;;;;;4BAaK,EAAE,MAAM;;;;UAI1B,CAAC;wBACD,MAAM,OAAO,+JAAC,CAAC,OAAO,CAAC;4BACrB,MAAM;4BACN,WAAW;4BACX,UAAU;gCAAC;gCAAI;6BAAG;4BAClB,YAAY;gCAAC;gCAAI;6BAAG;4BACpB,aAAa;gCAAC;gCAAG,CAAC;6BAAG;wBACvB;wBAEA,qBACE,6LAAC,8JAAM;4BAAY,UAAU;gCAAC,EAAE,GAAG,IAAI;gCAAG,EAAE,GAAG,IAAI;6BAAE;4BAAE,MAAM;sCAC3D,cAAA,6LAAC,4JAAK;0CACJ,cAAA,6LAAC;oCAAI,OAAO;wCAAE,UAAU;oCAAI;;sDAC1B,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAI,WAAU;oDAAW,OAAO;wDAAE,OAAO;oDAAG;8DAC1C,EAAE,KAAK,iBACN,6LAAC;wDAAI,KAAK,EAAE,KAAK;wDAAE,KAAK,EAAE,IAAI;wDAAE,WAAU;;;;;6EAE1C,6LAAC;wDAAI,WAAU;kEAAuF;;;;;;;;;;;8DAG1G,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAI,WAAU;sEAAe,EAAE,IAAI;;;;;;wDACnC,EAAE,GAAG,EAAE,uBAAS,6LAAC;4DAAI,WAAU;sEAAiC,EAAE,GAAG,CAAC,KAAK;;;;;;wDAC3E,EAAE,GAAG,EAAE,UAAU,yBAAW,6LAAC;4DAAI,WAAU;sEAAiC,EAAE,GAAG,CAAC,QAAQ,CAAC,OAAO;;;;;;;;;;;;;;;;;;sDAIvG,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,wIAAM;oDACL,MAAK;oDACL,SAAQ;oDACR,WAAU;oDACV,SAAS;wDACP,kBAAkB;4DAAE,KAAK,EAAE,GAAG;4DAAE,KAAK,EAAE,GAAG;4DAAE,SAAS,EAAE,GAAG,EAAE,UAAU;wDAAQ;oDAChF;8DACD;;;;;;8DAGD,6LAAC,wIAAM;oDACL,MAAK;oDACL,WAAU;oDACV,SAAS;wDACP,IAAI;4DACF,OAAO,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE;wDAC5B,EAAE,OAAO,GAAG;4DACV,8BAA8B;4DAC9B,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE;wDACvC;oDACF;8DACD;;;;;;;;;;;;;;;;;;;;;;;2BAxCI,EAAE,EAAE;;;;;oBAgDrB;kCAEA,6LAAC;wBAAc,KAAK,UAAU;wBAAK,KAAK,UAAU;;;;;;kCAClD,6LAAC;;;;;kCACD,6LAAC;;;;;oBAEA,CAAC,gBAAgB,YAAY,mBAC5B,6LAAC,8JAAM;wBACL,UAAU,eAAe;4BAAC,aAAa,GAAG;4BAAE,aAAa,GAAG;yBAAC,GAAG;4BAAC,aAAc,GAAG;4BAAE,aAAc,GAAG;yBAAC;wBACtG,MAAM;kCAEN,cAAA,6LAAC,4JAAK;sCACJ,cAAA,6LAAC;gCAAI,WAAU;0CAAsB;;;;;;;;;;;;;;;;;;;;;;0BAO7C,6LAAC;gBAAI,WAAU;gBAAoC,OAAO;oBAAE,QAAQ;gBAAM;;kCACxE,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAU,OAAM;oCAAU,OAAO,cAAc,IAAI;;;;;;8CACpD,6LAAC;oCAAU,OAAM;oCAAa,OAAO,cAAc,KAAK;;;;;;8CACxD,6LAAC;oCAAU,OAAM;oCAAS,OAAO,cAAc,QAAQ;;;;;;;;;;;;;;;;;kCAI3D,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,cAAW;4BACX,SAAS,IAAM,cAAc,CAAC,IAAM,CAAC;4BACrC,WAAU;sCAEV,cAAA,6LAAC;gCAAI,OAAM;gCAAK,QAAO;gCAAK,SAAQ;gCAAY,MAAK;gCAAO,OAAM;;kDAChE,6LAAC;wCAAO,IAAG;wCAAI,IAAG;wCAAI,GAAE;wCAAI,MAAK;;;;;;kDACjC,6LAAC;wCAAO,IAAG;wCAAK,IAAG;wCAAI,GAAE;wCAAI,MAAK;;;;;;kDAClC,6LAAC;wCAAO,IAAG;wCAAK,IAAG;wCAAI,GAAE;wCAAI,MAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAOzC,4BACC,6LAAC;gBAAI,WAAU;gBAAsK,OAAO;oBAAE,QAAQ;gBAAM;0BAC1M,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAO,cAAW;gCAAiB,SAAS,IAAM,cAAc;gCAAQ,WAAU;0CAAwB;;;;;;;;;;;sCAE7G,6LAAC;4BAAU,OAAM;4BAAU,OAAO,cAAc,IAAI;;;;;;sCACpD,6LAAC;4BAAU,OAAM;4BAAa,OAAO,cAAc,KAAK;;;;;;sCACxD,6LAAC;4BAAU,OAAM;4BAAS,OAAO,cAAc,QAAQ;;;;;;;;;;;;;;;;;0BAK7D,6LAAC,0JAAgB;gBACf,MAAM,CAAC,CAAC;gBACR,SAAS,IAAM,kBAAkB;gBACjC,KAAK,gBAAgB,OAAO;gBAC5B,KAAK,gBAAgB,OAAO;gBAC5B,SAAS,gBAAgB;;;;;;;;;;;;AAIjC;IApVwB;;QAgFP,kJAAS;;;MAhFF"}}]
}